# BA-Agent Skills Configuration

skills:
  # 异动检测分析Skill
  anomaly_detection:
    name: 异动检测分析
    description: |
      检测数据中的异常波动并分析可能原因。
      支持统计方法（3-sigma）、历史对比（同比/环比）、AI智能识别。

      使用场景：
      - "今天GMV有什么异常？"
      - "检测最近7天的异常波动"
      - "GMV突然下降是什么原因？"
    entrypoint: skills/anomaly_detection/main.py
    function: detect
    requirements:
      - pandas>=2.0.0
      - numpy>=1.24.0
      - scipy>=1.10.0
      - anthropic>=0.39.0
    env:
      ANTHROPIC_API_KEY: ${ANTHROPIC_API_KEY}
    config:
      default_method: statistical
      methods:
        - statistical  # 基于3-sigma的统计检测
        - historical   # 同比/环比历史对比
        - ai          # 使用Claude AI智能识别
      threshold: 2.0        # 统计检测的标准差倍数
      min_data_points: 7  # 最小数据点数

  # 归因分析Skill
  attribution:
    name: 归因分析
    description: |
      分析指标变化的归因因素，包括维度下钻、事件归因、外部因素分析。

      使用场景：
      - "为什么GMV增长了？"
      - "分析本周GMV下降的原因"
      - "华东地区GMV增长的主要驱动因素是什么？"
    entrypoint: skills/attribution/main.py
    function: analyze
    requirements:
      - pandas>=2.0.0
      - numpy>=1.24.0
      - anthropic>=0.39.0
    config:
      dimensions:
        - region      # 地区维度分析
        - category    # 品类维度分析
        - channel     # 渠道维度分析
        - user_type   # 用户分群分析
      attribution_methods:
        - contribution  # 贡献度分析
        - correlation   # 相关性分析
        - sequence      # 序列分析
      external_factors:
        - holiday      # 节假日因素
        - weather      # 天气因素
        - competitor   # 竞品动作

  # 报告生成Skill
  report_gen:
    name: 报告生成
    description: |
      自动生成业务分析报告，支持日报、周报、月报。

      使用场景：
      - "帮我生成本周的业务周报"
      - "生成GMV月度分析报告"
      - "自动生成每日业务简报"
    entrypoint: skills/report_gen/main.py
    function: generate
    requirements:
      - python-docx>=1.1.0
      - reportlab>=4.0.0
      - matplotlib>=3.7.0
      - anthropic>=0.39.0
    config:
      templates:
        daily:
          name: 日报模板
          sections:
            - 核心指标概览
            - 关键异动提醒
            - 今日重点关注
            - 明日建议
        weekly:
          name: 周报模板
          sections:
            - 本周经营概况
            - 核心指标趋势
            - 异动分析
            - 下周策略建议
        monthly:
          name: 月报模板
          sections:
            - 月度经营总结
            - 关键指标分析
            - 异动复盘
            - 下月规划
      formats:
        - pdf:     PDF格式报告
        - docx:    Word格式报告
        - xlsx:    Excel格式报告（含图表）
        - markdown: Markdown格式报告

  # 数据可视化Skill
  visualization:
    name: 数据可视化
    description: |
      使用 AI (Gemini 3 Pro) 自动生成 ECharts 可视化代码，经校验后返回前端渲染。

      使用场景：
      - "把最近30天的GMV趋势用图表展示"
      - "生成各地区GMV占比的饼图"
      - "展示用户增长的折线图"
    entrypoint: skills/visualization/main.py
    function: create_chart
    requirements:
      - google-generativeai>=0.3.0  # Gemini API
      - anthropic>=0.39.0            # Claude - 辅助分析
      - pandas>=2.0.0                # 数据处理
    env:
      GOOGLE_API_KEY: ${GOOGLE_API_KEY}
      ANTHROPIC_API_KEY: ${ANTHROPIC_API_KEY}
    config:
      gemini:
        model: gemini-1.5-pro
        temperature: 0.3
        max_tokens: 4096
      supported_charts:
        line: 折线图 - 趋势展示
        bar: 柱状图 - 对比展示
        pie: 饼图 - 占比展示
        scatter: 散点图 - 分布展示
        heatmap: 热力图 - 多维数据
        map: 地图 - 地域分布
        gauge: 仪表盘 - KPI展示
        funnel: 漏斗图 - 转化分析
      themes:
        - default
        - dark
        - macarons
        - vintage
      chart_limits:
        max_series: 10
        max_data_points: 10000
        max_categories: 50
      output_format: echarts_json  # 输出 ECharts JSON 配置

# 全局配置
config:
  # 默认语言
  language: zh-CN

  # 时区
  timezone: Asia/Shanghai

  # 日期格式
  date_format: "%Y-%m-%d"

  # 数字格式
  number_format:
    thousands_separator: ","
    decimal_separator: "."

  # 货币
  default_currency: CNY

  # Agent配置
  agent:
    model_temperature: 0.7  # Claude模型温度
    max_iterations: 10         # Agent最大迭代次数
    timeout_seconds: 30      # 单次工具调用超时
